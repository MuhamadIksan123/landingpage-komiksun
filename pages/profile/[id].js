/* eslint-disable react/no-unescaped-entities */
/* eslint-disable @next/next/no-img-element */
import React from 'react';
import Head from 'next/head';
import Footer from '../../components/Footer';
import Navbar from '../../components/Navbar';
import { getData } from '../../utils/fetchData';
import DetailVendor from '../../components/DetailVendor';

export default function DetailPage({ detailPage, dataKomik, dataGenre, id }) {
  return (
    <>
      <Head>
        <title>Semina || Detail Page</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <section className="bg-navy">
        <Navbar />
      </section>
      <DetailVendor detailPage={detailPage} dataKomik={dataKomik} dataGenre={dataGenre} id={id} />
      <Footer />
    </>
  );
}

export async function getServerSideProps(context) {
  const reqProfile = await getData(`api/v1/vendor/${context.params.id}`);
  const resProfile = reqProfile.data;

  const reqKomik = await getData(`api/v1/komik`);
  const resKomik = reqKomik.data;

   const reqGenre = await getData('api/v1/genre');
   const resGenre = reqGenre.data;


  return {
    props: {
      detailPage: resProfile,
      dataKomik: resKomik,
      dataGenre: resGenre,
      id: context.params.id,
    },
  };
}
